!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){function t(t,e,i,a){return new Promise(function(n,r){fetch("https://twelve-data1.p.rapidapi.com/time_series?symbol="+t+"&interval="+e+"&outputsize="+i+"&format=json",{method:"GET",headers:{"x-rapidapi-key":a,"x-rapidapi-host":"twelve-data1.p.rapidapi.com"}}).then(function(t){t.json().then(function(t){n(t)})}).catch(function(t){r(t)})})}AFRAME.registerComponent("stock-chart",{schema:{symbol:{default:"ETH/USD"},interval:{default:"15min"},length:{default:100},refreshRate:{default:5},width:{default:4},height:{default:2},enableBackground:{default:!0},backgroundColor:{default:"#333"},enableTitle:{default:!0},enablePrices:{default:!0},enableWicks:{default:!0}},init:function(){var e=this,i=this.data;t(i.symbol,i.interval,i.length,window.TWELVE_API_KEY).then(function(t){e.timeseries=t,i.timeseries=t,e.updateChart()}),setInterval(function(){t(i.symbol,i.interval,i.length,window.TWELVE_API_KEY).then(function(t){e.timeseries=t,i.timeseries=t,e.updateChart()})},1e3*i.refreshRate*60)},updateChart:function(){for(var t=this.el,e=this.data,i=e.length,a=e.width,n=e.height,r=e.timeseries,o=r.values;t.firstChild;)t.firstChild.remove();var u=o.map(function(t){return t.high}),s=o.map(function(t){return t.low}),l=Math.max.apply(Math,u),h=Math.min.apply(Math,s);function d(t){return(t-h)/(l-h)*n}var c=a/i,b=0;if(o.forEach(function(i){b++;var a=document.createElement("a-box");t.appendChild(a),a.setAttribute("width",c),a.setAttribute("depth",c);var n=d(i.open)-d(i.close);a.setAttribute("height",Math.abs(n));var r=b*c-c/2,o=n<0?Math.abs(n)/2:Math.abs(n)/-2,u=d(i.open)+o;a.setAttribute("position",r+" "+u+" 0");var s=n<0?"#f44":"#4f4";if(a.setAttribute("color",s),1==e.enableWicks){var l=document.createElement("a-box");a.appendChild(l),l.setAttribute("width",c/5),l.setAttribute("depth",c/5);var h=d(i.high)-d(i.low);l.setAttribute("height",h+.01),l.setAttribute("color",s)}}),1==e.enableBackground){var f=document.createElement("a-box");t.appendChild(f),f.setAttribute("width",a),f.setAttribute("height",n),f.setAttribute("depth",.05),f.setAttribute("color",e.backgroundColor),f.setAttribute("position",a/2+" "+n/2+" "+(-c-.05)/2)}if(1==e.enableTitle){var p=document.createElement("a-text");t.appendChild(p),p.setAttribute("value",r.meta.symbol+" | "+r.meta.interval),p.setAttribute("font","roboto"),p.setAttribute("position","0 0.155 "+-c/2)}if(1==e.enablePrices){var m=document.createElement("a-text");t.appendChild(m),m.setAttribute("scale",".75 .75 1"),m.setAttribute("font","roboto"),m.setAttribute("align","right"),m.setAttribute("value",""+Math.round(100*h)/100),m.setAttribute("position",a+" 0.1 "+-c/2);var A=document.createElement("a-text");t.appendChild(A),A.setAttribute("scale",".75 .75 1"),A.setAttribute("font","roboto"),A.setAttribute("align","right"),A.setAttribute("value",""+Math.round(100*l)/100),A.setAttribute("position",a+" "+(n-.1)+" "+-c/2)}}})});
//# sourceMappingURL=aframe-stock-ticker.umd.js.map
